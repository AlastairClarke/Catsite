<!DOCTYPE HTML>
<html lang="en-GB">
 <head>
  <title> alastairclarke.org | Blog </title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">		
  <link rel=StyleSheet type="text/css" href="../../css/style.css">
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
 </head>

<body>
 <header id="banner">
  <h1> Alastair Clarke's Personal Website </h1>
 </header>

 <section id="sidebar">
  <nav Class="navigation">
   <ul>
    <li> <a href="../../index.html"> Home </a>
    <li> <a href="../../pages/about.html"> About </a>
    <li> <a href="../../pages/blog.html"><b> Blog </b></a>
    <li> <a href="../../pages/code.html"> Code </a>
    <li> <a href="../../pages/reviews.html"> Reviews </a>
   </ul>
  </nav>
 </section>
	
 <section id="wrapper">
 <article id="2020">
<h3>2020 Blog</h3>
<h4>Date</h4>
<p>
<a href="#20200811-post">11th August</a> | <a href="#20200813-post">13th August</a> | <a href="#20200814-post">14th August</a>
</p>
</article>
<hr>
<article id="20200814-post">
<h2 id="random-assignment-of-a-vaccine">Random Assignment of a Vaccine</h2>
<h5 id="th-august">14th August</h5>
<p>As the world waits and hopes for a vaccine against Covid-19, the vaccine contenders must first be trialled. Let's say you have <em>k</em> doses of a vaccine and <em>m</em> volunteers. Each volunteer is assigned a random dose, independently of the others. Each dose is different and can be uniquely identified. A <em>collision</em> occurs whenever a volunteer is assigned a dose that has already been assigned to someone else. This situation is analogous to collisions occurring in a hashing system, and I've shamelessly copied the example in the <a href="https://umontreal-simul.github.io/ssj/docs/master/examples.html">SSJ tutorial</a> and shoehorned in the vaccine example.</p><br>
<p>We want to estimate the number of collisions (<em>C</em>) that can occur. Using the Stochastic Simulation in Java (SSJ) library developed by Pierre L'Ecuyer of the University of Montreal, we can estimate the probability distribution of <em>C</em>, its expection E[<em>C</em>] and its 95% Confidence Interval (CI<sub>95%</sub>).</p><br>
<p>By mid-May Dr Sarah Gilbert team's vaccine hoped to have vaccinated around <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7162644/">500 volunteers</a> (<em>m</em> = 500). If they prepared <em>k</em> doses, and attempted to randomly assign them, how many collisions would they expect to find? You would expect fewer collisions with a larger number of doses to draw from. Let's take <em>k</em> equal to 5,000, 10,000, 50,000 and 100,000 and estimate E[<em>C</em>]. Indeed our expectations are met as shown in the table below. These results were generated by running 10,000 simulations for each value of <em>k</em>.</p><br>
<table>
<thead>
<tr class="header">
<th>Number of Doses (<em>k</em>)</th>
<th>Expected Number of Collisions</th>
<th>CI<sub>95%</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5000</td>
<td>24.16</td>
<td>(24.07, 24.25)</td>
</tr>
<tr class="even">
<td>10000</td>
<td>12.29</td>
<td>(12.22, 12.35)</td>
</tr>
<tr class="odd">
<td>50000</td>
<td>2.48</td>
<td>(2.45, 2.51)</td>
</tr>
<tr class="even">
<td>100000</td>
<td>1.25</td>
<td>(1.23, 1.27)</td>
</tr>
</tbody>
</table>
<br>
<p>Creating 100,000 doses of a vaccine just to avoid collisions during assignment would not be sensible. I expect that in practise volunteers are not randomly assigned to a dose but rather a dose is assigned to a volunteer using a first-come-first-serve method and and collisions are avoided. You will have spare doses just in case some are tampered with or lost but not 100,000. My example here is contrived because I wanted to study SSJ.</p><br>
</article>
<hr>
<article id="20200813-post">
<h2 id="looking-back-at-the-uks-response-to-covid-19">Looking Back at the UK's Response to Covid-19</h2>
<h5>13th August</h5>
<p>In a 4-Aug <a href="https://www.bbc.co.uk/iplayer/episode/m000lkzq/hardtalk-sir-jeremy-farrar-director-of-the-wellcome-trust">interview</a> on the BBC's HARDtalk programme, Sir Jeremy Farrar said the UK responded late, it should have imposed the nationwide &quot;lockdown&quot; sooner and we should have done more testing earlier. The nationwide lockdown was announced on 23 March, but Farrar says a week earlier would have saved many lives.</p><br>
<p>To gauge when Covid-19 became prominent in national thought I looked through old episodes of the BBC's <a href="https://www.bbc.co.uk/iplayer/episodes/b006t1q9/question-time">Question Time</a>. Covid-19 first became the opening question on 27 February when the panel was asked, &quot;Is the Government prepared for a Coronavirus pandemic?&quot; The subsequent episodes are dominated by the pandemic and this very question. Two weeks later, on 12 March, Professor John Ashton appears on the panel heavily criticising the response of Public Health England. His comments seem very prescient now, particularly his point about letting Spanish football fans enter England and attend the football match against Liverpool, as it was later found by Professor Tim Spector that the <a href="https://www.itv.com/news/2020-05-26/coronavirus-cheltenham-festival-and-liverpool-game-increased-suffering-and-death">Northwest became a viral hotspot</a>. I remember when the Chief Scientific Advisor, Sir Patrick Vallance, was asked about why large public gatherings were still allowed to go ahead in the middle of March. Vallance argued that since one infected person would on average infect 2 or 3 people and the virus is most likely to spread in indoor environments among family, friends and colleagues, then the risk from large crowds is relatively less and should still go ahead <a href="https://www.youtube.com/watch?v=xRadMzCKnCU">(see 33 minutes in on 12 March)</a>. This was not a strong argument. The R number is affected by human behaviour and the more mixing of people the larger its value can be.</p><br>
<p>On 1 February Covid-19 first became an editorial item for The Lancet. The following week it published a comment <a href="https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(20)30300-7/fulltext">article</a> from Beijing academics on the virus. The Lancet published an <a href="https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(20)30374-3/fulltext#%20">article</a> on 22 February which made it clear that non-pharmaceutical intervention is needed and listed eight guidelines from the World Health Organisation. These guidelines emphasised the need for testing, tracking, tracing and isolation. This containment strategy was later shown to explain the subexponential growth of confirmed cases in China <a href="https://science.sciencemag.org/content/368/6492/742.full">(Maier and Brockmann, 2020)</a>.</p><br>
<p>If the UK is to prevent a second wave as bad as the first, it needs an effective containment strategy. This requires the ability to test at a high and efficient rate. It requires good communication between authorities and the public. And it requires the willingness of the public to get tested and isolate if they are showing symptoms or have been asked to isolate.</p><br>
<p>PS. On 11 August, BBC Radio 4 aired <a href="https://www.bbc.co.uk/programmes/m000lmg6">Led by the Science</a>, a programme about how scientific advice has been used during the pandemic. Highly recommended.</p>
</article>
<hr>
<article id="20200811-post">
<h2 id="hello">First Post of 2020</h2>
<h5>11th August</h5>
<p>I am changing the format of my blog posts. Previous posts have a separate page but now all the posts for the year will be on one page, with each post having its own segment. This style is more like a journal. </p><br>
<p>I have also changed how I write and process a post. I was previously writing all the html code but now I will write the post in markdown and use pandoc to convert that to html. This html is then <i>injected</i> into the published html file which contains all the posts for the year. I have written a bash script to automate the process and shared it below. To display the bash code in the browser I have wrapped it in the pre tag and changed &lt to &amplt and &gt to &ampgt.
</p>
<pre>
#!/bin/bash
# update.sh
# PURPOSE: File takes two inputs: name of *.html file being updated and 
# the *.md file being added. The md content becomes a new section with a 
# href added to the top.

FILE=$1 # file.html
ADD=$2 # newcontent.md

# First bit
awk '/DOCTYPE/{a=1};a;/&lthr&gt/{exit}' $FILE &gt top.html # look for first hr
awk '/&lthr&gt/,/&lt\/html&gt/' $FILE &gt bottom.html # look for most recent post
DATE=`date +"%Y%m%d"`
ID="id"$DATE"-post"
LINE1="&ltarticle id="\"$ID\""&gt"
LINE2="&lt/article&gt"
echo $LINE1 &gt&gt top.html

# MD bit
pandoc $ADD -o middle.html
cat middle.html &gt&gt top.html
echo $LINE2 &gt&gt top.html

# Last bit
cat bottom.html &gt&gt top.html
cat top.html &gt $FILE
rm top.html bottom.html middle.html

# Add href date of post
HREF=`awk '/#id2020/' $FILE`
NICEDATE=`date +"%dth %B"`
NEW=$HREF" | &lta href="\""#"$ID\""&gt"$NICEDATE"&lt/a&gt"
sed -i "s:$HREF:$NEW:g" $FILE
</pre>
<p>
Before running this script remember to make it executable using:
<br>
<code>
$ chmod +x update.sh
</code><br>
The script require two inputs: (1) file.html being updated, and; (2) new.md being added. It should run with the following. I hope this will make it easier and quicker to write and publish posts.<br>
<code>
$ ./update.sh "file.html" "new.md"
</code>
</p>
</article>
<hr>

 </section>

 <footer id="banner">
  <p style="background-color:white"> Copyright &copy 2020 Alastair Clarke </p>
 </footer>
</body>
</html>
